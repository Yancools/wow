{"ast":null,"code":"import React,{useContext,useEffect}from\"react\";import Auth from\"./view/Auth/Auth\";import Profile from\"./view/Profile/Profile\";import Registration from\"./view/Registration/Registration\";import'./css/reset.css';import{Routes,Route,Navigate}from'react-router-dom';import{observer}from\"mobx-react-lite\";import{checkAuth,userData}from\"./http/userAPI\";import{LOGIN_ROUTE,PROFILE_ROUTE,REGISTRATION_ROUTE}from\"./utils/consts\";import RequireAuth from\"./hoc/RequireAuth\";import{UserContext}from\"./providers/UserProvider\";import{jwtDecode}from\"jwt-decode\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const App=observer(()=>{const{userStore}=useContext(UserContext);useEffect(()=>{if(localStorage.getItem(\"Token\")){checkAuth().then(responce=>{const decode=jwtDecode(responce.data);userData(decode.nickname).then(data=>{userStore.setUserData(data);userStore.setProfileUrl(decode.nickname);});});}},[userStore]);return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",index:true,element:/*#__PURE__*/_jsx(RequireAuth,{children:/*#__PURE__*/_jsx(Navigate,{to:userStore.profileUrl})})}),/*#__PURE__*/_jsx(Route,{path:PROFILE_ROUTE,element:/*#__PURE__*/_jsx(RequireAuth,{children:/*#__PURE__*/_jsx(Profile,{})})}),/*#__PURE__*/_jsx(Route,{path:LOGIN_ROUTE,element:/*#__PURE__*/_jsx(Auth,{})}),/*#__PURE__*/_jsx(Route,{path:REGISTRATION_ROUTE,element:/*#__PURE__*/_jsx(Registration,{})})]})});});export default App;","map":{"version":3,"names":["React","useContext","useEffect","Auth","Profile","Registration","Routes","Route","Navigate","observer","checkAuth","userData","LOGIN_ROUTE","PROFILE_ROUTE","REGISTRATION_ROUTE","RequireAuth","UserContext","jwtDecode","jsx","_jsx","jsxs","_jsxs","App","userStore","localStorage","getItem","then","responce","decode","data","nickname","setUserData","setProfileUrl","className","children","path","index","element","to","profileUrl"],"sources":["C:/Users/ivana/Documents/web/Corp/client/src/App.jsx"],"sourcesContent":["import React, {useContext, useEffect} from \"react\";\r\nimport Auth from \"./view/Auth/Auth\";\r\nimport Profile from \"./view/Profile/Profile\";\r\nimport Registration from \"./view/Registration/Registration\";\r\nimport './css/reset.css';\r\nimport {Routes, Route, Navigate} from 'react-router-dom'\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { checkAuth, userData } from \"./http/userAPI\";\r\nimport { LOGIN_ROUTE, PROFILE_ROUTE, REGISTRATION_ROUTE} from \"./utils/consts\";\r\nimport RequireAuth from \"./hoc/RequireAuth\";\r\nimport { UserContext } from \"./providers/UserProvider\";\r\nimport { jwtDecode } from \"jwt-decode\"\r\n\r\n\r\nconst App = observer( () => {\r\n  const {userStore} = useContext(UserContext)\r\n  useEffect(() => {\r\n    if(localStorage.getItem(\"Token\")){\r\n      checkAuth().then(responce => {\r\n        const decode = jwtDecode(responce.data)\r\n        userData(decode.nickname).then((data) => {\r\n          userStore.setUserData(data)\r\n          userStore.setProfileUrl(decode.nickname)\r\n        }\r\n      )\r\n      })\r\n    }\r\n  }, [userStore])  \r\n\r\n  return (\r\n      <div className=\"App\">\r\n          <Routes>\r\n              <Route path=\"/\" index element = { \r\n                <RequireAuth>\r\n                  <Navigate to={userStore.profileUrl}/>\r\n                </RequireAuth>\r\n              }/>\r\n              <Route path={PROFILE_ROUTE} element = {\r\n                <RequireAuth>\r\n                  <Profile/>\r\n                </RequireAuth>\r\n              }/> \r\n              <Route path={LOGIN_ROUTE} element = { \r\n                <Auth/>\r\n              }/>\r\n              <Route path={REGISTRATION_ROUTE} element = {\r\n                 <Registration/> \r\n              }/>\r\n          </Routes>     \r\n      </div>\r\n  );\r\n})\r\n\r\nexport default App;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAGC,UAAU,CAAEC,SAAS,KAAO,OAAO,CAClD,MAAO,CAAAC,IAAI,KAAM,kBAAkB,CACnC,MAAO,CAAAC,OAAO,KAAM,wBAAwB,CAC5C,MAAO,CAAAC,YAAY,KAAM,kCAAkC,CAC3D,MAAO,iBAAiB,CACxB,OAAQC,MAAM,CAAEC,KAAK,CAAEC,QAAQ,KAAO,kBAAkB,CACxD,OAASC,QAAQ,KAAQ,iBAAiB,CAC1C,OAASC,SAAS,CAAEC,QAAQ,KAAQ,gBAAgB,CACpD,OAASC,WAAW,CAAEC,aAAa,CAAEC,kBAAkB,KAAO,gBAAgB,CAC9E,MAAO,CAAAC,WAAW,KAAM,mBAAmB,CAC3C,OAASC,WAAW,KAAQ,0BAA0B,CACtD,OAASC,SAAS,KAAQ,YAAY,QAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAGtC,KAAM,CAAAC,GAAG,CAAGb,QAAQ,CAAE,IAAM,CAC1B,KAAM,CAACc,SAAS,CAAC,CAAGtB,UAAU,CAACe,WAAW,CAAC,CAC3Cd,SAAS,CAAC,IAAM,CACd,GAAGsB,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC,CAC/Bf,SAAS,CAAC,CAAC,CAACgB,IAAI,CAACC,QAAQ,EAAI,CAC3B,KAAM,CAAAC,MAAM,CAAGX,SAAS,CAACU,QAAQ,CAACE,IAAI,CAAC,CACvClB,QAAQ,CAACiB,MAAM,CAACE,QAAQ,CAAC,CAACJ,IAAI,CAAEG,IAAI,EAAK,CACvCN,SAAS,CAACQ,WAAW,CAACF,IAAI,CAAC,CAC3BN,SAAS,CAACS,aAAa,CAACJ,MAAM,CAACE,QAAQ,CAAC,CAC1C,CACF,CAAC,CACD,CAAC,CAAC,CACJ,CACF,CAAC,CAAE,CAACP,SAAS,CAAC,CAAC,CAEf,mBACIJ,IAAA,QAAKc,SAAS,CAAC,KAAK,CAAAC,QAAA,cAChBb,KAAA,CAACf,MAAM,EAAA4B,QAAA,eACHf,IAAA,CAACZ,KAAK,EAAC4B,IAAI,CAAC,GAAG,CAACC,KAAK,MAACC,OAAO,cAC3BlB,IAAA,CAACJ,WAAW,EAAAmB,QAAA,cACVf,IAAA,CAACX,QAAQ,EAAC8B,EAAE,CAAEf,SAAS,CAACgB,UAAW,CAAC,CAAC,CAC1B,CACd,CAAC,CAAC,cACHpB,IAAA,CAACZ,KAAK,EAAC4B,IAAI,CAAEtB,aAAc,CAACwB,OAAO,cACjClB,IAAA,CAACJ,WAAW,EAAAmB,QAAA,cACVf,IAAA,CAACf,OAAO,GAAC,CAAC,CACC,CACd,CAAC,CAAC,cACHe,IAAA,CAACZ,KAAK,EAAC4B,IAAI,CAAEvB,WAAY,CAACyB,OAAO,cAC/BlB,IAAA,CAAChB,IAAI,GAAC,CACP,CAAC,CAAC,cACHgB,IAAA,CAACZ,KAAK,EAAC4B,IAAI,CAAErB,kBAAmB,CAACuB,OAAO,cACrClB,IAAA,CAACd,YAAY,GAAC,CAChB,CAAC,CAAC,EACC,CAAC,CACR,CAAC,CAEZ,CAAC,CAAC,CAEF,cAAe,CAAAiB,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}