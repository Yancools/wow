{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ivana\\\\OneDrive\\\\\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B\\\\Corp\\\\client\\\\src\\\\view\\\\Chat\\\\Chat.jsx\",\n  _s = $RefreshSig$();\nimport './Chat.css';\nimport React, { useContext, useEffect } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { observer } from \"mobx-react\";\nimport Menu from \"../../components/Menu/Menu\";\nimport { chat, chats } from '../../http/communicationApi';\nimport { useLoaderData } from 'react-router-dom';\nimport { CommunicationContext } from '../../providers/CommunicationProvider';\nimport { SERVER_API } from '../../utils/consts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Chat = _s(observer(_c = _s(() => {\n  _s();\n  const [translation] = useTranslation();\n  const {\n    communicationStore\n  } = useContext(CommunicationContext);\n  const chat = useLoaderData();\n  useEffect(() => {\n    async function getChats() {\n      communicationStore.setChat(chat.data);\n    }\n    getChats();\n    return () => {\n      communicationStore.setChat([]);\n    };\n  }, [communicationStore]);\n  useEffect(() => {\n    const interval = setInterval(async () => {\n      try {\n        const result = await chats();\n        communicationStore.setChat(result.data);\n      } catch (error) {\n        console.log(error);\n      }\n    }, 10000);\n    return () => {\n      clearInterval(interval);\n      communicationStore.setChat([]);\n    };\n  }, [communicationStore]);\n  console.log(communicationStore.chat);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"section\",\n      children: [/*#__PURE__*/_jsxDEV(Menu, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"content\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"content__title\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 9\n  }, this);\n}, \"IlsM3eDQ/5FEijnnYY60AMCzkIQ=\", false, function () {\n  return [useTranslation, useLoaderData];\n})), \"IlsM3eDQ/5FEijnnYY60AMCzkIQ=\", false, function () {\n  return [useTranslation, useLoaderData];\n});\n_c2 = Chat;\nexport const ChatLoader = async ({\n  params\n}) => {\n  var _res$response, _res$response2;\n  const res = await chat(params.id);\n  if ((res === null || res === void 0 ? void 0 : (_res$response = res.response) === null || _res$response === void 0 ? void 0 : _res$response.status) === 400 || (res === null || res === void 0 ? void 0 : (_res$response2 = res.response) === null || _res$response2 === void 0 ? void 0 : _res$response2.status) === 401) {\n    throw new Response('Page is not found...', {\n      status: 404\n    });\n  }\n  return res;\n};\n_c3 = ChatLoader;\nexport default Chat;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"Chat$observer\");\n$RefreshReg$(_c2, \"Chat\");\n$RefreshReg$(_c3, \"ChatLoader\");","map":{"version":3,"names":["React","useContext","useEffect","useTranslation","observer","Menu","chat","chats","useLoaderData","CommunicationContext","SERVER_API","jsxDEV","_jsxDEV","Chat","_s","_c","translation","communicationStore","getChats","setChat","data","interval","setInterval","result","error","console","log","clearInterval","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c2","ChatLoader","params","_res$response","_res$response2","res","id","response","status","Response","_c3","$RefreshReg$"],"sources":["C:/Users/ivana/OneDrive/Документы/Corp/client/src/view/Chat/Chat.jsx"],"sourcesContent":["import './Chat.css'\r\nimport React, { useContext, useEffect } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { observer } from \"mobx-react\";\r\nimport Menu from \"../../components/Menu/Menu\"\r\nimport { chat, chats } from '../../http/communicationApi';\r\nimport { useLoaderData } from 'react-router-dom';\r\nimport { CommunicationContext } from '../../providers/CommunicationProvider';\r\nimport { SERVER_API } from '../../utils/consts';\r\nconst Chat = observer(() => {\r\n    const [translation] = useTranslation();\r\n    const {communicationStore} = useContext(CommunicationContext)\r\n    const chat = useLoaderData()\r\n    useEffect(() => {\r\n        async function getChats() {\r\n            communicationStore.setChat(chat.data)\r\n        }\r\n        getChats();\r\n        return (() => {\r\n            communicationStore.setChat([])\r\n        })\r\n    },[communicationStore])\r\n\r\n    useEffect(() => {\r\n        const interval = setInterval(async ()=>{\r\n            try {\r\n                const result = await chats()\r\n                communicationStore.setChat(result.data)\r\n            } catch (error) {\r\n                console.log(error)\r\n            }\r\n        }, 10000)\r\n        return (() => {\r\n            clearInterval(interval)\r\n            communicationStore.setChat([])\r\n        })\r\n        \r\n    },[communicationStore])\r\n    console.log(communicationStore.chat)\r\n    return (\r\n        <div className=\"container\">\r\n            <div className = \"section\">\r\n                <Menu/>\r\n                <div className = \"content\"> \r\n                    <div className=\"content__title\">\r\n                        \r\n                    </div>\r\n                </div>        \r\n        </div>\r\n    </div>\r\n    )\r\n})\r\nexport const ChatLoader = async ({params}) => {\r\n    const res = await chat(params.id)\r\n    if (res?.response?.status === 400 || res?.response?.status === 401){\r\n        throw new Response('Page is not found...', {status: 404})\r\n    }\r\n    return res\r\n}\r\nexport default Chat;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}