{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ivana\\\\OneDrive\\\\\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B\\\\Corp\\\\client\\\\src\\\\view\\\\Chat\\\\Chat.jsx\",\n  _s = $RefreshSig$();\nimport './Chat.css';\nimport React, { useContext, useEffect } from \"react\";\nimport { observer } from \"mobx-react\";\nimport Menu from \"../../components/Menu/Menu\";\nimport { chat } from '../../http/communicationApi';\nimport { useLoaderData, useParams } from 'react-router-dom';\nimport { CommunicationContext } from '../../providers/CommunicationProvider';\nimport { SERVER_API } from '../../utils/consts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Chat = _s(observer(_c = _s(() => {\n  var _communicationStore$c, _communicationStore$c2, _communicationStore$c3, _communicationStore$c4, _communicationStore$c5, _communicationStore$c6, _communicationStore$c7, _communicationStore$c8;\n  _s();\n  const {\n    communicationStore\n  } = useContext(CommunicationContext);\n  const chatData = useLoaderData();\n  let {\n    id\n  } = useParams();\n  useEffect(() => {\n    async function getChats() {\n      communicationStore.setChat(chatData);\n      console.log(communicationStore.chat.messages);\n    }\n    getChats();\n    return () => {\n      communicationStore.setChat([]);\n    };\n  }, [communicationStore, chatData, id]);\n  useEffect(() => {\n    const interval = setInterval(async () => {\n      try {\n        const result = await chat(id);\n        communicationStore.setChat(result);\n        console.log(communicationStore.chat);\n      } catch (error) {\n        console.log(error);\n      }\n    }, 10000);\n    return () => {\n      clearInterval(interval);\n      communicationStore.setChat([]);\n    };\n  }, [communicationStore, id]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"section\",\n      children: [/*#__PURE__*/_jsxDEV(Menu, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"content\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat__header\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"chat__header--title\",\n              children: (communicationStore === null || communicationStore === void 0 ? void 0 : (_communicationStore$c = communicationStore.chat) === null || _communicationStore$c === void 0 ? void 0 : (_communicationStore$c2 = _communicationStore$c.companionData) === null || _communicationStore$c2 === void 0 ? void 0 : _communicationStore$c2.firstname) + ' ' + (communicationStore === null || communicationStore === void 0 ? void 0 : (_communicationStore$c3 = communicationStore.chat) === null || _communicationStore$c3 === void 0 ? void 0 : (_communicationStore$c4 = _communicationStore$c3.companionData) === null || _communicationStore$c4 === void 0 ? void 0 : _communicationStore$c4.lastname)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 47,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"chat__header--nickname\",\n              children: '@' + (communicationStore === null || communicationStore === void 0 ? void 0 : (_communicationStore$c5 = communicationStore.chat) === null || _communicationStore$c5 === void 0 ? void 0 : (_communicationStore$c6 = _communicationStore$c5.companionData) === null || _communicationStore$c6 === void 0 ? void 0 : _communicationStore$c6.nickname)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 50,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"chat__header--photo\",\n              src: SERVER_API + (communicationStore === null || communicationStore === void 0 ? void 0 : (_communicationStore$c7 = communicationStore.chat) === null || _communicationStore$c7 === void 0 ? void 0 : (_communicationStore$c8 = _communicationStore$c7.companionData) === null || _communicationStore$c8 === void 0 ? void 0 : _communicationStore$c8.photo),\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 53,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat__content\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat__input\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 9\n  }, this);\n}, \"npu4DM/rHD+3WIN/FnAd0Z/ehMY=\", false, function () {\n  return [useLoaderData, useParams];\n})), \"npu4DM/rHD+3WIN/FnAd0Z/ehMY=\", false, function () {\n  return [useLoaderData, useParams];\n});\n_c2 = Chat;\nexport const ChatLoader = async ({\n  params\n}) => {\n  var _res$response, _res$response2;\n  const res = await chat(params.id);\n  if ((res === null || res === void 0 ? void 0 : (_res$response = res.response) === null || _res$response === void 0 ? void 0 : _res$response.status) === 400 || (res === null || res === void 0 ? void 0 : (_res$response2 = res.response) === null || _res$response2 === void 0 ? void 0 : _res$response2.status) === 401) {\n    var _res$response3, _res$response3$data, _res$response4;\n    throw new Response(res === null || res === void 0 ? void 0 : (_res$response3 = res.response) === null || _res$response3 === void 0 ? void 0 : (_res$response3$data = _res$response3.data) === null || _res$response3$data === void 0 ? void 0 : _res$response3$data.message, {\n      status: res === null || res === void 0 ? void 0 : (_res$response4 = res.response) === null || _res$response4 === void 0 ? void 0 : _res$response4.status\n    });\n  }\n  return res;\n};\n_c3 = ChatLoader;\nexport default Chat;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"Chat$observer\");\n$RefreshReg$(_c2, \"Chat\");\n$RefreshReg$(_c3, \"ChatLoader\");","map":{"version":3,"names":["React","useContext","useEffect","observer","Menu","chat","useLoaderData","useParams","CommunicationContext","SERVER_API","jsxDEV","_jsxDEV","Chat","_s","_c","_communicationStore$c","_communicationStore$c2","_communicationStore$c3","_communicationStore$c4","_communicationStore$c5","_communicationStore$c6","_communicationStore$c7","_communicationStore$c8","communicationStore","chatData","id","getChats","setChat","console","log","messages","interval","setInterval","result","error","clearInterval","className","children","fileName","_jsxFileName","lineNumber","columnNumber","companionData","firstname","lastname","nickname","src","photo","alt","_c2","ChatLoader","params","_res$response","_res$response2","res","response","status","_res$response3","_res$response3$data","_res$response4","Response","data","message","_c3","$RefreshReg$"],"sources":["C:/Users/ivana/OneDrive/Документы/Corp/client/src/view/Chat/Chat.jsx"],"sourcesContent":["import './Chat.css'\r\nimport React, { useContext, useEffect } from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport Menu from \"../../components/Menu/Menu\"\r\nimport { chat } from '../../http/communicationApi';\r\nimport { useLoaderData, useParams } from 'react-router-dom';\r\nimport { CommunicationContext } from '../../providers/CommunicationProvider';\r\nimport { SERVER_API } from '../../utils/consts';\r\nconst Chat = observer(() => {\r\n    const {communicationStore} = useContext(CommunicationContext)\r\n    const chatData = useLoaderData()\r\n    let {id} = useParams()\r\n    useEffect(() => {\r\n        async function getChats() {\r\n            communicationStore.setChat(chatData)\r\n            console.log(communicationStore.chat.messages)\r\n        }\r\n        getChats();\r\n        return (() => {\r\n            communicationStore.setChat([])\r\n        })\r\n    },[communicationStore, chatData, id])\r\n\r\n    useEffect(() => {\r\n        const interval = setInterval(async ()=>{\r\n            try {\r\n                const result = await chat(id)\r\n                communicationStore.setChat(result)\r\n                console.log(communicationStore.chat)\r\n            } catch (error) {\r\n                console.log(error)\r\n            }\r\n        }, 10000)\r\n        return (() => {\r\n            clearInterval(interval)\r\n            communicationStore.setChat([])\r\n        })\r\n        \r\n    },[communicationStore, id])\r\n    return (\r\n        <div className=\"container\">\r\n            <div className = \"section\">\r\n                <Menu/>\r\n                <div className = \"content\"> \r\n                    <div className=\"chat\">\r\n                        <div className=\"chat__header\">\r\n                            <div className=\"chat__header--title\">\r\n                                {communicationStore?.chat?.companionData?.firstname  + ' ' + communicationStore?.chat?.companionData?.lastname}\r\n                            </div>\r\n                            <div className=\"chat__header--nickname\">\r\n                                {'@' + communicationStore?.chat?.companionData?.nickname}\r\n                            </div>\r\n                            <img className=\"chat__header--photo\" src={SERVER_API + communicationStore?.chat?.companionData?.photo} alt=\"\"/>\r\n                        </div>\r\n                        <div className=\"chat__content\">\r\n                            {/* {\r\n                                communicationStore.chat.messages.map((value, key) =>\r\n                                    <div className=\"message\" key={key}>\r\n                                        <div className=\"message__data\">\r\n                                            <div className=\"message__data--title\">\r\n                                                {value?.user?.firstname + ' ' + value?.user?.firstname}\r\n                                            </div>\r\n                                            <div className=\"message__data--time\">\r\n                                                {value?.time}\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"message__title\">\r\n                                            \r\n                                        </div>\r\n                                        {value.content}\r\n                                        {value.file}\r\n                                    </div>\r\n                                )\r\n                            } */}\r\n                        </div>\r\n                        <div className=\"chat__input\">\r\n\r\n                        </div>\r\n                    </div>\r\n                </div>        \r\n        </div>\r\n    </div>\r\n    )\r\n})\r\nexport const ChatLoader = async ({params}) => {\r\n    const res = await chat(params.id)\r\n    if (res?.response?.status === 400 || res?.response?.status === 401){\r\n        throw new Response(res?.response?.data?.message, {status: res?.response?.status})\r\n    }\r\n    return res\r\n}\r\nexport default Chat;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}